# model2regex

This code is the basis for the results of the master thesis **model2regex:
Detecting DGAs with Regular Expressions Generated by a Language Model**.

This 
## Setup

- Install python 3.12 
- Install [`poetry`](https://python-poetry.org/docs/#installing-with-pipx)
- run `poetry install` 

## Training

- To start training use `poetry run python -m model2regex`
- To run all the unittests use `poetry run python -m unittest discover -s model2regex -p "*_test.py"`

## Main file

- [`main.py`](main.py) will run the current possible steps, use `poetry run python main.py -h` for a help message
  - Example call `poetry run python main.py --steps gen-dataset --steps train-models --model-path model_abc --domain-generator generate_url_scheme_1 abc-domains.txt`
  - To run the evaluation run `poetry run python main.py --steps evaluate --model-path eval eval_data`

## Results
- [`results.py`](results.py) contains the code for generating the figures of the thesis from `result.db`.
    - To recreate the figures of our result simply run `poetry run python result.py`
    - [sqlean](https://github.com/nalgeon/sqlean) is a pre-requisite. On Linux the load extension lines have to be replaced by the `.so` files.

All results of the Master thesis are also contained within the `results.db` without having to run the evaluation.
